<template>
	<div ref="container" id="footNavBox">
		<div class="footNav">
			<div id="footNavClassify">
				<footNavItem :list="footNavList" />
			</div>
			<div id="aboutusBox">
				<footNavItem :list="aboutusList" />
			</div>
		</div>
		<div class="hbLogo"></div>
		<div class="companyBox">
			<span class="companyInfo">DCloud å³æ•°å­—å¤©å ‚ï¼ˆåŒ—äº¬ï¼‰ç½‘ç»œæŠ€æœ¯æœ‰é™å…¬å¸æ˜¯</span>
			<div style="display: inline; margin-left: 5px" class="companyInfo">
				<a href="//www.w3.org/" target="_blank" class="w3c">W3C</a>
				æˆå‘˜åŠ
				<a href="//www.html5plus.org/" target="_blank" class="html5">HTML5ä¸­å›½äº§ä¸šè”ç›Ÿ</a>
				å‘èµ·å•ä½
			</div>
		</div>
		<div class="beianBox">
			<a
				id="domain"
				class="beian"
				href="https://beian.miit.gov.cn/#/Integrated/index"
				target="_blank"
			>
				{{ domain }}
			</a>
			<div class="domainImgBox">
				<img
					class="domainImg"
					src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f184e7c3-1912-41b2-b81f-435d1b37c7b4/769929a3-65eb-4d11-815d-84f88197a152.png"
				/>
				<a
					class="beian"
					href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802035340"
					target="_blank"
				>
					äº¬å…¬ç½‘å®‰å¤‡ï¼š11010802035340å·
				</a>
			</div>

			<span class="anbaoInfo">å›½å®¶ä¿¡æ¯å®‰å…¨ç­‰çº§ä¿æŠ¤ä¸‰çº§ï¼Œè¯ä¹¦ç¼–å·ï¼š11010813802-20001</span>
		</div>
	</div>
</template>

<script>
	export default {
		components: {
			footNavItem: {
				functional: true,
				props: {
					list: {
						type: Array,
						default: () => [],
					},
				},
				render: (h, { props }) => {
					return props.list.map((footNavListItem, _index) =>
						h('div', { staticClass: 'footNavItem', key: footNavListItem.title || _index }, [
							h('div', { staticClass: 'navItemTitle' }, footNavListItem.title),
							h('div', { staticClass: 'navLine' }),
							h(
								'div',
								{ staticClass: 'navItemDetailBox' },
								footNavListItem.content.map((item, index) =>
									h(
										'a',
										{
											staticClass: 'navItemDetail',
											key: item.url || index,
											attrs: {
												target: '_blank',
												href: item.url,
											},
										},
										item.subTitle
									)
								)
							),
						])
					);
				},
			},
		},
		data: () => ({
			footNavList: [
				{
					title: 'å¼€å‘äº§å“',
					content: [
						{
							subTitle: 'HBuilderX',
							url: 'https://www.dcloud.io/hbuilderx.html',
						},
						{
							subTitle: 'uni-app',
							url: 'https://uniapp.dcloud.net.cn/',
						},
						{
							subTitle: 'uniCloud',
							url: 'https://uniapp.dcloud.net.cn/uniCloud/README',
						},
						{
							subTitle: 'uniMPsdk',
							url: 'https://nativesupport.dcloud.net.cn/',
						},
						{
							subTitle: '5+Runtime',
							url: 'https://www.dcloud.io/runtime.html',
						},
						{
							subTitle: 'wap2app',
							url: 'https://www.dcloud.io/wap2app.html?platform=wap2app',
						},
						{
							subTitle: 'MUI',
							url: 'https://www.dcloud.io/mui.html',
						},
						{
							subTitle: 'uni-id',
							url: 'https://uniapp.dcloud.net.cn/uniCloud/uni-id',
						},
						{
							subTitle: 'uniPay',
							url: 'https://uniapp.dcloud.net.cn/uniCloud/unipay',
						},
						{
							subTitle: 'uniPush',
							url: 'https://uniapp.dcloud.net.cn/unipush',
						},
						{
							subTitle: 'uni-verify',
							url: 'https://uniapp.dcloud.io/univerify',
						},
						{
							subTitle: 'sms',
							url: 'https://uniapp.dcloud.net.cn/uniCloud/send-sms',
						},
						{
							subTitle: 'uni-starter',
							url: 'https://ext.dcloud.net.cn/plugin?id=5057',
						},
						{
							subTitle: 'uni-admin',
							url: 'https://uniapp.dcloud.net.cn/uniCloud/admin',
						},
						{
							subTitle: 'uni-upgrade-center',
							url: 'https://uniapp.dcloud.io/uniCloud/upgrade-center',
						},
					],
				},
			],
			aboutusList: [
				{
					title: 'è¿è¥äº§å“',
					content: [
						{
							subTitle: 'uni-AD',
							url: 'https://uniad.dcloud.net.cn/login',
						},
						{
							subTitle: 'uniç»Ÿè®¡',
							url: 'https://tongji.dcloud.net.cn/',
						},
						{
							subTitle: 'uniå‘è¡Œ',
							url: 'https://www.dcloud.io/dportal.html',
						},
						{
							subTitle: '',
							url: '',
						},
						{
							subTitle: '',
							url: '',
						},
						{
							subTitle: '',
							url: '',
						},
					],
				},
				/* {
	         'title': '',
	         'content': []
	       }, */
				{
					title: 'å¼€å‘è€…æœåŠ¡',
					content: [
						{
							subTitle: 'é—®ç­”ç¤¾åŒº',
							url: 'https://ask.dcloud.net.cn/explore/',
						},
						{
							subTitle: 'å¼€å‘è€…åå°',
							url: 'https://dev.dcloud.net.cn/',
						},
					],
				},
				{
					title: 'æŠ€æœ¯æ–‡æ¡£',
					content: [
						{
							subTitle: 'uni-appæ–‡æ¡£',
							url: 'https://uniapp.dcloud.io/',
						},
						{
							subTitle: 'uniCloudæ–‡æ¡£',
							url: 'https://uniapp.dcloud.io/uniCloud/README',
						},
						{
							subTitle: 'åŸç”Ÿå¼€å‘è€…æ”¯æŒæ–‡æ¡£',
							url: 'https://nativesupport.dcloud.net.cn/',
						},
						{
							subTitle: 'HBuilderæ–‡æ¡£',
							url: 'https://hx.dcloud.net.cn/',
						},
					],
				},
				{
					title: 'ç”Ÿæ€æœåŠ¡',
					content: [
						{
							subTitle: 'æ’ä»¶å¸‚åœº',
							url: 'https://ext.dcloud.net.cn/',
						},
						{
							subTitle: 'OAuthç”¨æˆ·å¼€æ”¾å¹³å°',
							url: 'https://open.dcloud.net.cn/pages/login/login',
						},
					],
				},
				{
					title: 'å…³äºæˆ‘ä»¬',
					content: [
						{
							subTitle: 'DCloudå®˜ç½‘',
							url: 'https://dcloud.io/',
						},
						{
							subTitle: 'æ¡ˆä¾‹',
							url: 'https://uniapp.dcloud.io/case',
						},
						{
							subTitle: 'éœ€æ±‚å¢™',
							url: 'https://dev.dcloud.net.cn/wish/?channel=uniapp',
						},
						{
							subTitle: 'è®¸å¯åè®®',
							url: 'https://ask.dcloud.net.cn/article/35623',
						},
						{
							subTitle: 'åŠ å…¥æˆ‘ä»¬',
							url: 'https://www.dcloud.io/hr/',
						},
						{
							subTitle: 'èµåŠ©æˆ‘ä»¬',
							url: 'https://dev.dcloud.net.cn/sponsor/',
						},
					],
				},
				{
					title: 'è”ç³»æˆ‘ä»¬',
					content: [
						{
							subTitle: 'å•†åŠ¡åˆä½œï¼šbd@dcloud.io',
							url: 'mailto:bd@dcloud.io',
						},
						{
							subTitle: 'å¹¿å‘Šåˆä½œï¼šuniad@dcloud.io',
							url: 'mailto:uniad@dcloud.io',
						},
					],
				},
			],
			domain: '',
		}),
		mounted() {
			if (document.domain === 'uniapp.dcloud.net.cn') {
				this.domain = 'äº¬ICPå¤‡12046007å·-4';
			} else {
				this.domain = 'è’™ICPå¤‡14002744å·-1';
			}
			this.fixBottom();
		},
		methods: {
			fixBottom() {
				this.$nextTick(() => {
					this.$refs.container.style.bottom = `0px`;
					const bottom =
						document.documentElement.clientHeight -
						this.$refs.container.getBoundingClientRect().bottom;
					if (bottom > 0) {
						const preBottom = parseFloat(this.$refs.container.style.bottom);
						console.log('ğŸš€ ~ file: Footer.vue ~ line 296 ~ this.$nextTick ~ preBottom', preBottom);
						this.$refs.container.style.position = 'relative';
						this.$refs.container.style.bottom = `-${bottom}px`;
					} else {
						this.$refs.container.removeAttribute('style');
					}
				});
			},
		},
		watch: {
			$route() {
				this.fixBottom();
			},
		},
	};
</script>

<style lang="stylus">
	@import '../styles/footer.styl'
</style>
